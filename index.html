<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gráfica de una Ecuación Lineal con Zoom</title>
    
</head>
<body>
    <h1>Graficar Ecuación Lineal</h1>
    <p>Ingrese los valores de la ecuación de la forma <strong>y = mx + b</strong></p>
    
    <label for="m">Pendiente (m):</label>
    <input type="number" id="m" step="any" value="" class="input-neon"><br>
    
    <label for="b">Intersección (b):</label>
    <input type="number" id="b" step="any" value="" class="input-neon"><br>
    
    <button onclick="graficar()">Graficar</button>
    
    <canvas id="canvas" width="600" height="600"></canvas>
    
    <script>
        var zoomScale = 1; // Factor de zoom inicial
        var baseScale = 20; // Escala base sin zoom
        var scale = baseScale; // Escala actual
        var offsetX = 0; // Desplazamiento en X
        var offsetY = 0; // Desplazamiento en Y
        var isDragging = false; // Estado del desplazamiento
        var startX, startY; // Posición inicial para el desplazamiento
        var initialPinchDistance = null; // Distancia inicial entre dos dedos
        var lastPinchZoomScale = 1; // Zoom previo al gesto de pinza

        function graficar() {
            var canvas = document.getElementById('canvas');
            var ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);  // Limpiar el canvas

            var m = parseFloat(document.getElementById('m').value);  // Obtener el valor de la pendiente
            var b = parseFloat(document.getElementById('b').value);  // Obtener el valor de la intersección

            var width = canvas.width;
            var height = canvas.height;

            // Ajustar la escala actual con el zoom
            scale = baseScale * zoomScale;

            // Dibujar el eje X y el eje Y
            ctx.beginPath();
            ctx.moveTo(0, height / 2 - offsetY);
            ctx.lineTo(width, height / 2 - offsetY);  // Eje X
            ctx.moveTo(width / 2 + offsetX, 0);
            ctx.lineTo(width / 2 + offsetX, height);  // Eje Y
            ctx.strokeStyle = 'black';
            ctx.stroke();

            // Dibujar marcas y números en el eje X y Y
            ctx.font = '12px Arial';
            ctx.fillStyle = 'black';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';

            // Marcas y números en el eje X
            for (var x = -width; x <= width; x += scale) { // Ampliar rango de X
                var xCanvas = width / 2 + x + offsetX;
                ctx.beginPath();
                ctx.moveTo(xCanvas, height / 2 - offsetY - 5);
                ctx.lineTo(xCanvas, height / 2 - offsetY + 5);
                ctx.stroke();
                if (x !== 0) {
                    ctx.fillText((x / scale).toFixed(0), xCanvas, height / 2 - offsetY + 15);
                }
            }

            // Marcas y números en el eje Y
            for (var y = -height; y <= height; y += scale) { // Ampliar rango de Y
                var yCanvas = height / 2 - y - offsetY;
                ctx.beginPath();
                ctx.moveTo(width / 2 + offsetX - 5, yCanvas);
                ctx.lineTo(width / 2 + offsetX + 5, yCanvas);
                ctx.stroke();
                if (y !== 0) {
                    ctx.fillText((y / scale).toFixed(0), width / 2 + offsetX - 15, yCanvas);
                }
            }

            // Dibujar la ecuación lineal y = mx + b
            ctx.beginPath();
            ctx.strokeStyle = 'red';

            var x1 = -width;
            var y1 = m * (x1 / scale) + b;

            var x2 = width;
            var y2 = m * (x2 / scale) + b;

            // Ajustar las coordenadas al canvas
            ctx.moveTo(width / 2 + x1 + offsetX, height / 2 - y1 * scale - offsetY);
            ctx.lineTo(width / 2 + x2 + offsetX, height / 2 - y2 * scale - offsetY);

            ctx.stroke();
        }

        // Función para manejar el zoom con la rueda del ratón
        document.getElementById('canvas').addEventListener('wheel', function(event) {
            event.preventDefault();
            var delta = event.deltaY > 0 ? 0.9 : 1.1;
            zoomScale *= delta;
            zoomScale = Math.max(2, Math.min(zoomScale, 5)); // Limitar el zoom
            graficar();  // Redibujar con el nuevo zoom
        });

        // Eventos de desplazamiento con el ratón
        var canvas = document.getElementById('canvas');
        canvas.addEventListener('mousedown', function(event) {
            isDragging = true;
            startX = event.offsetX - offsetX;
            startY = event.offsetY + offsetY;
        });

        canvas.addEventListener('mouseup', function() {
            isDragging = false;
        });

        canvas.addEventListener('mousemove', function(event) {
            if (isDragging) {
                offsetX = event.offsetX - startX;
                offsetY = startY - event.offsetY;
                graficar();  // Redibujar con el nuevo desplazamiento
            }
        });

        // Soporte para zoom con los dedos (gesto de pinza)
        canvas.addEventListener('touchstart', function(event) {
            if (event.touches.length === 2) {
                initialPinchDistance = getDistance(event.touches[0], event.touches[1]);
                lastPinchZoomScale = zoomScale;
            }
        });

        canvas.addEventListener('touchmove', function(event) {
            if (event.touches.length === 2) {
                event.preventDefault();  // Prevenir scroll de la página
                var currentDistance = getDistance(event.touches[0], event.touches[1]);
                if (initialPinchDistance) {
                    var pinchZoomFactor = currentDistance / initialPinchDistance;
                    zoomScale = Math.max(2, Math.min(lastPinchZoomScale * pinchZoomFactor, 5));
                    graficar();  // Redibujar con el nuevo zoom
                }
            }
        });

        canvas.addEventListener('touchend', function(event) {
            if (event.touches.length < 2) {
                initialPinchDistance = null;
            }
        });

        // Función para calcular la distancia entre dos puntos de contacto
        function getDistance(touch1, touch2) {
            var dx = touch1.clientX - touch2.clientX;
            var dy = touch1.clientY - touch2.clientY;
            return Math.sqrt(dx * dx + dy * dy);
        }

        // Inicializar la gráfica al cargar la página
        window.onload = graficar;
    </script>
    
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: linear-gradient(to bottom, #ffffff, #d1e0ff);
            margin: 0;
            position: relative;
        }
        canvas {
            border: 1px solid black;
            background-color: rgba(255, 255, 255, 0.8);
        }
        .easter-egg {
            position: absolute;
            width: 100px;
            opacity: 0.001;
            top: 5%;
            left: 90%;
            transition: opacity 0.3s;
        }
        .easter-egg:hover {
            opacity: 1;
        }
        input, button {
            margin: 10px;
            padding: 5px;
        }
        .input-neon {
            border-radius: 20px;
            padding: 10px;
            border: 2px solid #008cba; /* Color celeste más oscuro */
            background-color: transparent;
            color: black;
            transition: box-shadow 0.3s ease-in-out;
        }
        .input-neon:focus {
            outline: none;
            box-shadow: 0 0 10px #007ba7, 0 0 20px #007ba7, 0 0 30px #007ba7; /* Efecto de neón celeste más oscuro */
        }
        button {
            background-color: #008cba;
            color: white;
            border-radius: 20px;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #007ba7;
        }
    </style>
</body>
</html>
