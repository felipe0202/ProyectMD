<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gráfica de una Ecuación Lineal con Zoom</title>
       <style>
           body {
            font-family: 'Verdana', sans-serif;
            text-align: center;
            background: linear-gradient(to bottom, #ffffff, #d1e0ff);
            margin: 0;
            color: #004080; /* Azul suave para contrastar */
            position: relative;
            overflow-x: hidden; /* Evitar scroll lateral innecesario */
        }

        h1 {
            color: #003366; /* Azul oscuro para mayor contraste */
        }

        canvas {
            border: 1px solid black;
            background-color: rgba(255, 255, 255, 0.8);
            display: block;
            margin: 0 auto; /* Centrar el canvas */
            max-width: 80%; /* Limitar el ancho máximo en pantallas grandes */
            height: auto; /* Mantener la proporción del canvas */
            margin-bottom: 20px; /* Evitar que toque el borde inferior */
        }

        input, button {
            margin: 10px;
            padding: 5px;
            color: #004080; /* Azul suave */
        }

        .input-neon {
            border-radius: 20px;
            padding: 10px;
            border: 2px solid #008cba;
            outline: none;
            transition: box-shadow 0.3s ease-in-out;
        }

        .input-neon:focus {
            box-shadow: 0 0 10px #007ba7;
        }

        button {
            background-color: #008cba;
            color: white;
            border-radius: 20px;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #007ba7;
        }



        body {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            min-height: 100vh; /* Asegurar que el contenido ocupe toda la pantalla */
        }


    </style>
</head>
<body>
    <div>
        <h1>Graficar Ecuación Lineal</h1>
        <p>Antes de graficar reinicie la gráfica para evitar distorsiones</p>
        <p>Ingrese los valores de la ecuación de la forma <strong>y = mx + b</strong></p>
        <label for="m">Pendiente (m):</label>
        <input type="number" id="m" step="any" value="" class="input-neon"><br>
        <label for="b">Intersección (b):</label>
        <input type="number" id="b" step="any" value="" class="input-neon"><br>
        <button onclick="graficar()">Graficar</button><button onclick="location.reload()">Resetear gráfica</button>
    </div>
    <div>
        <canvas id="canvas"></canvas>
    </div>

    <script>
        var zoomScale = 1; // Factor de zoom inicial
        var baseScale = 20; // Escala base sin zoom
        var scale = baseScale; // Escala actual
        var offsetX = 0; // Desplazamiento en X
        var offsetY = 0; // Desplazamiento en Y
        var isDragging = false; // Estado del desplazamiento
        var startX, startY; // Posición inicial para el desplazamiento

        // Función para ajustar el tamaño del canvas de manera responsive
        function ajustarCanvas() {
            var canvas = document.getElementById('canvas');
            var containerWidth = canvas.parentElement.clientWidth;
            var containerHeight = window.innerHeight * 0.6; // 60% de la altura de la ventana
            canvas.width = containerWidth;
            canvas.height = containerHeight;
            graficar(); // Redibujar la gráfica
        }
function ajustarCanvas() {
    var canvas = document.getElementById('canvas');
    var containerWidth = canvas.parentElement.clientWidth;
    var containerHeight = window.innerHeight * 0.80; // Aumenta el porcentaje de la altura de la ventana (por ejemplo 65%)
    canvas.width = containerWidth;
    canvas.height = containerHeight;
    graficar(); // Redibujar la gráfica
}
        // Función para hacer zoom automático si los puntos están fuera del canvas
        function autoZoom(m, b, canvas) {
            var ctx = canvas.getContext('2d');
            var width = canvas.width;
            var height = canvas.height;

            // Intersección con el eje Y (x = 0 -> y = b)
            var yIntercept = b * scale;
            // Intersección con el eje X (y = 0 -> x = -b/m)
            var xIntercept = -b / m * scale;

            // Ajustar el zoom si las intersecciones están fuera del canvas
            if (Math.abs(yIntercept) > height / 2 || Math.abs(xIntercept) > width / 2) {
                zoomScale *= 0.9; // Reducir el zoom
                if (zoomScale < 0.5) zoomScale = 0.5; // Limitar el zoom mínimo
                graficar(); // Redibujar con el nuevo zoom
            }
        }

        function graficar() {
            var canvas = document.getElementById('canvas');
            var ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);  // Limpiar el canvas

            var m = parseFloat(document.getElementById('m').value);  // Obtener el valor de la pendiente
            var b = parseFloat(document.getElementById('b').value);  // Obtener el valor de la intersección

            if (isNaN(m) || isNaN(b)) return; // Validación de entrada

            var width = canvas.width;
            var height = canvas.height;

            // Ajustar la escala actual con el zoom
            scale = baseScale * zoomScale;

            // Dibujar el eje X y el eje Y
            ctx.beginPath();
            ctx.moveTo(0, height / 2 - offsetY);
            ctx.lineTo(width, height / 2 - offsetY);  // Eje X
            ctx.moveTo(width / 2 + offsetX, 0);
            ctx.lineTo(width / 2 + offsetX, height);  // Eje Y
            ctx.strokeStyle = 'black';
            ctx.stroke();

            // Dibujar marcas y números en el eje X y Y
            ctx.font = '12px Arial';
            ctx.fillStyle = 'black';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';

            // Marcas y números en el eje X
            for (var x = -width; x <= width; x += scale) {
                var xCanvas = width / 2 + x + offsetX;
                ctx.beginPath();
                ctx.moveTo(xCanvas, height / 2 - offsetY - 5);
                ctx.lineTo(xCanvas, height / 2 - offsetY + 5);
                ctx.stroke();
                if (x !== 0) {
                    ctx.fillText((x / scale).toFixed(0), xCanvas, height / 2 - offsetY + 15);
                }
            }

            // Marcas y números en el eje Y
            for (var y = -height; y <= height; y += scale) {
                var yCanvas = height / 2 - y - offsetY;
                ctx.beginPath();
                ctx.moveTo(width / 2 + offsetX - 5, yCanvas);
                ctx.lineTo(width / 2 + offsetX + 5, yCanvas);
                ctx.stroke();
                if (y !== 0) {
                    ctx.fillText((y / scale).toFixed(0), width / 2 + offsetX - 15, yCanvas);
                }
            }

            // Dibujar la ecuación lineal y = mx + b
            ctx.beginPath();
            ctx.strokeStyle = 'red';

            var x1 = -width;
            var y1 = m * (x1 / scale) + b;
            var x2 = width;
            var y2 = m * (x2 / scale) + b;

            // Ajustar las coordenadas al canvas
            ctx.moveTo(width / 2 + x1 + offsetX, height / 2 - y1 * scale - offsetY);
            ctx.lineTo(width / 2 + x2 + offsetX, height / 2 - y2 * scale - offsetY);

            ctx.stroke();

            // Llamar a la función de zoom automático
            autoZoom(m, b, canvas);
        }

        // Resto de eventos de desplazamiento y zoom igual a antes
        window.onload = ajustarCanvas;
        window.onresize = ajustarCanvas;
    </script>
</body>
</html>
